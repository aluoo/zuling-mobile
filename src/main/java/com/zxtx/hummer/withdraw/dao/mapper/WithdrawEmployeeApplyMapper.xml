<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxtx.hummer.withdraw.dao.mapper.WithdrawEmployeeApplyMapper">

    <select id="selectByParam" resultType="com.zxtx.hummer.withdraw.vo.WithdrawApplyVo">
        SELECT a.*,b.name as employeeName, b.mobile_number as mobileNumber,c.name as toEmployeeName, d.name as
        channelName from withdraw_employee_apply a
        left join employee b on a.employee_id=b.id
        left join employee c on a.to_employee_id = c.id
        left join company d on b.company_id = d.id
        <where>
            1=1
            <if test="req.startTime != null">and a.create_time<![CDATA[>= ]]>#{req.startTime}</if>
            <if test="req.endTime != null">and a.create_time<![CDATA[<= ]]>#{req.endTime}</if>
            <if test="req.employeeName != null and req.employeeName != '' ">
                and b.name LIKE concat(#{req.employeeName}, '%')
            </if>
            <if test="req.toPlatform != null">
                and a.to_platform = #{req.toPlatform}
            </if>
            <if test="req.status != null">
                and a.status = #{req.status}
            </if>
            <if test="req.type != null">
                and a.type = #{req.type}
            </if>
            <if test="req.channelName != null and req.channelName != '' ">
                and d.name = #{req.channelName}
            </if>
        </where>
        order by a.create_time desc
    </select>

</mapper>
