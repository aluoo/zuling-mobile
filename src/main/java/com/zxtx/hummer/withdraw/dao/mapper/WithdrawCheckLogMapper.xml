<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxtx.hummer.withdraw.dao.mapper.WithdrawCheckLogMapper">

    <select id="selectByParam" resultType="com.zxtx.hummer.withdraw.vo.WithdrawApplyCheckVo">
        SELECT a.*,b.apply_no as applyNo, c.name as userName from withdraw_check_log a
        left join withdraw_employee_apply b on a.apply_id=b.id
        left join sys_user c on a.sys_user_id = c.user_id
        <where>
            1=1
            <if test="req.applyNo != null and req.applyNo != '' ">
                and b.apply_no LIKE concat(#{req.applyNo}, '%')
            </if>
            <if test="req.toEmployeeId != null">
                and a.to_employee_id = #{req.toEmployeeId}
            </if>
        </where>
        order by a.create_time desc
    </select>

</mapper>
